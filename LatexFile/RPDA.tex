\section{Register Pushdown Transducers and Register Pushdown Automata}
\subsection{Data words and registers}
We assume a countable set $D$ of \emph{data values}.
For finite alphabets $\Sigma_\dblI,\Sigma_\dblO$ and a countable set $D$,
an infinite sequence $(a^\dblI_1,d_1)(a^\dblO,d'_1)\cdots \in ((\Sigma_\dblI\times D)\cdot(\Sigma_\dblO\times D))^\omega$ is called a \emph{data word}.
We write $\DW(\Sigma_\dblI,\Sigma_\dblO,D)=((\Sigma_\dblI\times D)\cdot(\Sigma_\dblO\times D))^\omega$.

For $k\in\Natz$, a mapping $\theta: [k] \to D$ is called an \emph{assignment}
(of data values to $k$ registers).
Let $\Theta_k$ denote the collection of assignments to $k$ registers.
We specify $\bot\in D$ as the initial data value and
$\theta_\bot\in\Theta_k$ be the initial assignment such that
$\theta_\bot(i)=\bot$ for all $i\in[k]$.

% For $j_1\cdots j_n\in [k]^*$, we define $\theta(j_1\cdots j_n)=\theta(j_1)\cdots\theta(j_n)$ and $\theta(\varepsilon) = \varepsilon$.
We denote $\Tst_k = \scrP([k]\cup\{\top\})$ and $\Asgn_k = \scrP([k])$
where $\top\notin\Nat$ is the unique symbol that represents a stack top value.
$\Tst_k$ is the set of guard conditions.
For $\tst\in\Tst_k$, $\theta\in\Theta_k$ and $d,e\in D$,
we denote $\theta,d,e\models\tst$ if $\theta(i) = d \Leftrightarrow i\in\tst$
and $e = d \Leftrightarrow \top\in\tst$ hold.
(In definitions of register pushdown transducer (automaton) in the next section,
the data values $d$ and $e$ represent an input data value and a stack top data value, respectively.)
$\Asgn_k$ is the set of assignment conditions.
For $\asgn\in\Asgn_k$, $\theta,\theta'\in\Theta_k$ and $d\in D$,
let $\theta[\asgn\leftarrow d]$ be the assignment
$\theta'$ such that $\theta'(i) = d$ for $i\in\asgn$ and $\theta'(i)=\theta(i)$ for $i\notin\asgn$.
Let $Z_D: \Com([k])\times \Theta_k\times D \to D^*$ be a function defined as
$Z_D(\pop,\theta,d)=\varepsilon$, $Z_D(\skip,\theta,d)=d$ and $Z_D(\push(j),\theta,d)=\theta(j)d$.

\subsection{Register pushdown transducers}
\begin{definition}
A $k$-{register pushdown transducer} ($k$-RPDT) over finite alphabets $\Sigma_\dblI,\Sigma_\dblO$ and an infinite set $D$ of data values is
$\calT=(P, p_0, \Delta)$ where
$P$ is a finite set of states,
$p_0\in P$ is the initial state,
$\Delta: P\times\Sigma_\dblI\times\Tst_k \to P\times\Sigma_\dblO\times \Asgn_k \times [k]\times \Com([k])$ is a finite set of deterministic transition rules.
\end{definition}
$D$ is used as a stack alphabet.
Let $\ID_\calT= P\times \Theta_k\times D^*$
and $\Rightarrow_\calT\ \subseteq \ID_\calT\times ((\Sigma_\dblI\times D)\cdot(\Sigma_\dblO\times D))\times \ID_\calT$ be a transition relation of $\calT$ such that $((p, \theta, u), (a,d^\dblI)(b,d^\dblO), (q, \theta', u'))\in\ \Rightarrow_\calT$ iff
there exist a rule $(p, a, \tst) \to (q, b, \asgn, j, \com) \in \Delta$
a data value $e\in D$, and a sequence of data values $w\in D^*$ where $u=ew$ that satisfy the follows:
$d^\dblI, e, \theta\models\tst$, $\theta' = \theta[\asgn\leftarrow d^\dblI]$, $\theta'(j) = d^\dblO$ and $u'= Z_D(\com,\theta',e)w$,
and then we write $(p, \theta, u) \done_{\calT}^{(a,d^\dblI)(b,d^\dblO)}(q, \theta', u')$.
If $\calT$ is clear from the context,
we abbreviate
$\done_{\calT}^{(a,d^\dblI)(b,d^\dblO)}$ as $\done^{(a,d^\dblI)(b,d^\dblO)}$.
% If a sequence of IDs $(q_0, \theta_0, w_0), \cdots, (q_n, \theta_n, w_n)\in \ID_\mathcal{T}$
% and data values $d^\dblI_1, \cdots, d^\dblI_n, d^\dblO_1, \cdots, d^\dblO_n\in D$ satisfy $(q_{i-1}, \theta_{i-1}, w_{i-1})\done^{d^\dblI_i, d^\dblO_i}(q_i, \theta_i, w_i)$ for all $i\in[n]$, we write $(q_0, \theta_0, w_0)\done^{w^\dblI, w^\dblO}(q_n, \theta_n, w_n)$
% where $w^\dblI = d^\dblI_1 \cdots d^\dblI_n$ and $w^\dblO = d^\dblO_1 \cdots d^\dblO_n$.

% If we emphasize the rule $r$ and the data value $d$,
% we write $\done_d^r$.
The run and languages of $\calT$ is those of TS $(\ID_\calT, (q_0,\theta_\bot, \bot), (\Sigma_\dblI\times D)\cdot(\Sigma_\dblO\times D), \Rightarrow_\calT, c)$ where $c(s)=2$ for all $s\in\ID_\calT$.
Let \RPDTk\ be the class of $k$-RPDT and \RPDT = $\bigcup_{k\in\Natz}$\RPDTk.
% Note that \RPDT$[0]$ = \PDT.

\subsection{Register pushdown automata}\label{sec:RA}
\begin{definition}
A nondeterministic $k$-register pushdown automaton ($k$-NRPDA) over $\Sigma_\dblI,\Sigma_\dblO$ and $D$ is $\calA=(Q, Q_\dblI, Q_\dblO, q_0, \delta, c)$, where
\begin{itemize}
\item $Q$ is a finite set of states,
\item $Q_\dblI\cup Q_\dblO = Q, Q_\dblI\cap Q_\dblO = \emptyset$,
\item $q_0\in Q$ is the initial state, and
\item $\delta: Q \times (\Sigma\cup\{\varepsilon\})\times \Tst_k \to \scrP(Q \times\Asgn_k\times \Com([k]))$ is a transition function having one of the forms:
\begin{itemize}
\item $(q_\dblX,a_\dblX,\tst)\to(q_\overX,\asgn,\com)$ (input rule)
\item $(q_\dblX,\varepsilon,\tst)\to(q'_\dblX,\asgn,\com)$ ($\varepsilon$ rule)
\end{itemize}
where $(\dblX, \overX)\in\{(\dblI, \dblO), (\dblO,\dblI)\}$,
$q_\dblX, q'_\dblX\in Q_\dblX, q_\overX\in Q_\overX, a_\dblX\in \Sigma_\dblX$, $\tst\in\Tst_k$, $\asgn\in\Asgn_k$ and $\com\in\Com([k])$.
\item $c: Q \to [n]$ where $n\in \Nat$ is the number of priorities.
\end{itemize}
\end{definition}
\noindent
Let $\ID_\calA= Q\times \Theta_k\times D^*$.
We define a set of transition relation $\vdash_\calA\ \subseteq\ID_\calA\times ((\Sigma\cup\{\varepsilon\})\times D)\times \ID_\calA$ as satisfying
$((q,\theta,u), (a,d), (q',\theta',u'))\in\ \vdash_\calA$,
written as $(q,\theta,u)\vdash^{(a,d)}(q',\theta',u')$, iff
there exist a rule $(p, a, \tst) \to (q, \asgn, \com) \in \delta$
a data value $e\in D$, and a sequence of data values $w\in D^*$ where $u=ew$ that satisfy the follows:
$d, e, \theta\models\tst$, $\theta' = \theta[\asgn\leftarrow d]$ and $u'= Z_D(\com,\theta',e)w$.
We write $\vdash^{(a,d)}_\calA$ as $\vdash^{(a,d)}$ if $\calA$ is clear from comtext.
The run and language of $k$-DRPDA $\calA$ is those of TS
$\calS_\calA=(\ID_\calA, (q_0, \theta_\bot, \bot), (\Sigma\cup\{\varepsilon\})\times D, \Rightarrow_\calA, c')$ where
$c'((q,\theta,u))=c(q)$ for all $(q,\theta,u)\in\ID_\calA$.
We call $\calA$ deterministic, or $k$-DRPDA, if $\calS_\calA$ is deterministic.

\subsection{Classes of RPDA}
An $\varepsilon$-free $k$-RPDA is an RPDA not having any $\varepsilon$ rules.
Let \DRPDA\ and \NRPDA\ be the class of $\varepsilon$-free $k$-DRPDA and $k$-NRPDA for all $k\in\Natz$, respectively.
Let $\Com_v=\{\pop,\skip,\push\}$ and $v:\Com([k])\to\Com$ be a function such that $v(\push(j))=\push$ for $j\in[k]$ and $v(\com)=\com$ otherwise.
An visible $k$-RPDA is input and output alphabets are $\Sigma_\dblI\times\Com_v$ and $\Sigma_\dblO\times\Com_v$, respectively,
and every rule has one of the form $(q,(a,v(\com)))\to(q',\asgn,\com)$.
Let \DRPDAv\ be the class of visible $\varepsilon$-free $k$-DRPDA for all $k\in\Natz$, respectively.
% $k$-RPDA $\calA=(Q, q_0, \delta, c)$ is said to be deterministic if
% $|\delta(q,a,\tst)\ \cup\ \delta(q,\varepsilon,\tst)| \leq 1$ for all $q\in Q, a\in\Sigma, \tst\in\Tst_k$.
% nondeterministic if the language of $\calA$ is defined as $L_N(\calA)$ and
% universal if the language of $\calA$ is defined as $L_U(\calA)$.
% For those cases, we denote $\calA$ as $k$-DRPDA, $k$-NRPDA and $k$-URPDA, respectively.
